{"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/TimeAndObservers"},"schemaVersion":{"minor":3,"patch":0,"major":0},"hierarchy":{"paths":[["doc:\/\/AstronomyKit\/documentation\/AstronomyKit"]]},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/astronomykit\/timeandobservers"]}],"abstract":[{"type":"text","text":"Work with astronomical time and geographic observer locations."}],"seeAlsoSections":[{"identifiers":["doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/GettingStarted"],"anchor":"Essentials","generated":true,"title":"Essentials"}],"kind":"article","sections":[],"metadata":{"modules":[{"name":"AstronomyKit"}],"roleHeading":"Article","role":"article","title":"Time and Observers"},"primaryContentSections":[{"kind":"content","content":[{"level":2,"type":"heading","text":"Overview","anchor":"Overview"},{"inlineContent":[{"type":"text","text":"Accurate time handling is fundamental to astronomy. AstronomyKit provides "},{"type":"reference","isActive":true,"identifier":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/AstroTime"},{"type":"text","text":" for precise time representation and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/Observer"},{"type":"text","text":" for geographic locations."}],"type":"paragraph"},{"level":2,"type":"heading","text":"Working with Time","anchor":"Working-with-Time"},{"level":3,"type":"heading","text":"Creating Times","anchor":"Creating-Times"},{"syntax":"swift","type":"codeListing","code":["\/\/ Current time","let now = AstroTime.now","","\/\/ From calendar components (in UTC)","let eclipse = AstroTime(year: 2024, month: 4, day: 8, hour: 18, minute: 15)","","\/\/ From Foundation Date","let time = AstroTime(Date())","","\/\/ From Julian days since J2000","let jd = AstroTime(ut: 9132.5)"]},{"level":3,"type":"heading","text":"Time Arithmetic","anchor":"Time-Arithmetic"},{"syntax":"swift","type":"codeListing","code":["let now = AstroTime.now","","\/\/ Add days or hours","let tomorrow = now.addingDays(1)","let nextHour = now.addingHours(1)","let lastWeek = now.addingDays(-7)","","\/\/ Compare times","if tomorrow > now {","    print(\"Tomorrow comes after now\")","}"]},{"level":3,"type":"heading","text":"Converting to Date","anchor":"Converting-to-Date"},{"syntax":"swift","type":"codeListing","code":["let time = AstroTime.now","let date: Date = time.date","","\/\/ Format for display","let formatter = DateFormatter()","formatter.dateStyle = .medium","formatter.timeStyle = .short","print(formatter.string(from: time.date))"]},{"level":3,"type":"heading","text":"Understanding UT vs TT","anchor":"Understanding-UT-vs-TT"},{"inlineContent":[{"text":"AstroTime stores two time values internally:","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Universal Time (UT)","type":"text"}]},{"type":"text","text":": Based on Earth’s rotation, used for rise\/set times"}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Terrestrial Time (TT)"}],"type":"strong"},{"text":": Uniform time scale, used for planetary orbits","type":"text"}],"type":"paragraph"}]}]},{"syntax":"swift","type":"codeListing","code":["let time = AstroTime.now","print(\"UT: \\(time.ut)\")  \/\/ Days since J2000 noon (UTC)","print(\"TT: \\(time.tt)\")  \/\/ Days since J2000 noon (TT)"]},{"inlineContent":[{"type":"text","text":"The difference (ΔT) is automatically handled by AstronomyKit."}],"type":"paragraph"},{"level":3,"type":"heading","text":"Sidereal Time","anchor":"Sidereal-Time"},{"inlineContent":[{"text":"Get the sidereal time at the prime meridian:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let sidereal = AstroTime.now.siderealTime","print(\"Greenwich Sidereal Time: \\(sidereal) hours\")"]},{"inlineContent":[{"text":"Calculate local sidereal time for any longitude:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let observer = Observer(latitude: 40.7, longitude: -74.0)  \/\/ NYC","let lst = AstroTime.now.siderealTime(longitude: observer.longitude)","print(\"Local Sidereal Time: \\(lst) hours\")"]},{"level":2,"type":"heading","text":"Working with Observers","anchor":"Working-with-Observers"},{"level":3,"type":"heading","text":"Creating Observers","anchor":"Creating-Observers"},{"syntax":"swift","type":"codeListing","code":["\/\/ Basic location (sea level)","let seattle = Observer(latitude: 47.6062, longitude: -122.3321)","","\/\/ With height above sea level (meters)","let everest = Observer(","    latitude: 27.9881,","    longitude: 86.9250,","    height: 8848.86",")"]},{"level":3,"type":"heading","text":"Coordinate Conventions","anchor":"Coordinate-Conventions"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Latitude"}],"type":"strong"},{"text":": -90° (south) to +90° (north)","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"Longitude","type":"text"}],"type":"strong"},{"type":"text","text":": -180° (west) to +180° (east)"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Height"}]},{"type":"text","text":": Meters above sea level"}],"type":"paragraph"}]}]},{"level":3,"type":"heading","text":"Built-in Locations","anchor":"Built-in-Locations"},{"syntax":"swift","type":"codeListing","code":["let greenwich = Observer.greenwich       \/\/ Royal Observatory","let primeMeridian = Observer.primeMeridian  \/\/ 0°, 0°"]},{"level":3,"type":"heading","text":"Observer Properties","anchor":"Observer-Properties"},{"syntax":"swift","type":"codeListing","code":["let observer = Observer(latitude: 40.0, longitude: -105.0, height: 1600)","","\/\/ Local gravity (accounts for latitude and altitude)","let gravity = observer.gravity  \/\/ m\/s²","","\/\/ Atmospheric conditions at this elevation","let atmosphere = try observer.atmosphere","print(\"Pressure: \\(atmosphere.pressure) mbar\")"]},{"level":3,"type":"heading","text":"Observer Vectors","anchor":"Observer-Vectors"},{"inlineContent":[{"text":"Get the observer’s position relative to Earth’s center:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let observer = Observer.greenwich","","\/\/ Position vector in AU","let position = try observer.vector(at: .now)","","\/\/ Full state (position and velocity)","let state = try observer.state(at: .now)","print(\"Position: \\(state.position)\")","print(\"Velocity: \\(state.velocity)\")"]},{"level":2,"type":"heading","text":"Time Zones","anchor":"Time-Zones"},{"inlineContent":[{"text":"AstronomyKit works entirely in UTC. Convert to local time using Foundation:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let sunrise = try CelestialBody.sun.riseTime(after: .now, from: observer)!","","let formatter = DateFormatter()","formatter.timeZone = TimeZone(identifier: \"America\/New_York\")","formatter.timeStyle = .short","print(\"Sunrise (local): \\(formatter.string(from: sunrise.date))\")"]},{"level":2,"type":"heading","text":"Codable Support","anchor":"Codable-Support"},{"inlineContent":[{"type":"text","text":"Both types support "},{"code":"Codable","type":"codeVoice"},{"type":"text","text":" for persistence:"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let observer = Observer(latitude: 40.7, longitude: -74.0)","let data = try JSONEncoder().encode(observer)","","let time = AstroTime.now","let timeData = try JSONEncoder().encode(time)"]}]}],"references":{"doc://AstronomyKit/documentation/AstronomyKit/AstroTime":{"url":"\/documentation\/astronomykit\/astrotime","abstract":[{"text":"Represents a moment in time for astronomical calculations.","type":"text"}],"role":"symbol","navigatorTitle":[{"text":"AstroTime","kind":"identifier"}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"AstroTime","kind":"identifier"}],"identifier":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/AstroTime","title":"AstroTime","type":"topic","kind":"symbol"},"doc://AstronomyKit/documentation/AstronomyKit":{"url":"\/documentation\/astronomykit","title":"AstronomyKit","identifier":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit","abstract":[{"type":"text","text":"Swift bindings for Don Cross’ "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/cosinekitty\/astronomy"},{"type":"text","text":" library."}],"type":"topic","kind":"symbol","role":"collection"},"https://github.com/cosinekitty/astronomy":{"identifier":"https:\/\/github.com\/cosinekitty\/astronomy","url":"https:\/\/github.com\/cosinekitty\/astronomy","type":"link","title":"Astronomy Engine","titleInlineContent":[{"text":"Astronomy Engine","type":"text"}]},"doc://AstronomyKit/documentation/AstronomyKit/GettingStarted":{"title":"Getting Started with AstronomyKit","type":"topic","url":"\/documentation\/astronomykit\/gettingstarted","kind":"article","identifier":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/GettingStarted","role":"article","abstract":[{"type":"text","text":"Learn how to add AstronomyKit to your project and perform basic astronomical calculations."}]},"doc://AstronomyKit/documentation/AstronomyKit/Observer":{"url":"\/documentation\/astronomykit\/observer","abstract":[{"type":"text","text":"A geographic location for observing celestial objects."}],"navigatorTitle":[{"kind":"identifier","text":"Observer"}],"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Observer"}],"type":"topic","identifier":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/Observer","title":"Observer","kind":"symbol","role":"symbol"}}}