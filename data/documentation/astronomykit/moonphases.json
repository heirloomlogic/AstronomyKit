{"primaryContentSections":[{"content":[{"type":"heading","level":2,"text":"Overview","anchor":"Overview"},{"inlineContent":[{"text":"The ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/Moon"},{"text":" type provides comprehensive lunar calculations including phase angles, illumination, quarter searches, libration data, and node crossings.","type":"text"}],"type":"paragraph"},{"type":"heading","level":2,"text":"Phase Angle","anchor":"Phase-Angle"},{"inlineContent":[{"type":"text","text":"The phase angle indicates the Moonâ€™s position in its cycle:"}],"type":"paragraph"},{"type":"codeListing","code":["let angle = try Moon.phaseAngle(at: .now)","print(\"Phase angle: \\(angle)Â°\")","\/\/ 0Â° = New Moon, 90Â° = First Quarter, 180Â° = Full, 270Â° = Third Quarter"],"syntax":"swift"},{"type":"heading","level":2,"text":"Phase Names and Emoji","anchor":"Phase-Names-and-Emoji"},{"inlineContent":[{"text":"Convert angles to human-readable descriptions:","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["let angle = try Moon.phaseAngle(at: .now)","","print(Moon.phaseName(for: angle))  \/\/ \"Waxing Gibbous\"","print(Moon.emoji(for: angle))      \/\/ \"ðŸŒ”\""],"syntax":"swift"},{"inlineContent":[{"text":"The eight phase names:","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"New Moon (ðŸŒ‘)","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Waxing Crescent (ðŸŒ’)","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"First Quarter (ðŸŒ“)","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Waxing Gibbous (ðŸŒ”)","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Full Moon (ðŸŒ•)"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Waning Gibbous (ðŸŒ–)","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Third Quarter (ðŸŒ—)","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Waning Crescent (ðŸŒ˜)"}],"type":"paragraph"}]}]},{"type":"heading","level":2,"text":"Illumination","anchor":"Illumination"},{"inlineContent":[{"type":"text","text":"Calculate the fraction of the Moon thatâ€™s lit:"}],"type":"paragraph"},{"type":"codeListing","code":["let angle = try Moon.phaseAngle(at: .now)","let illumination = Moon.illumination(for: angle)","print(\"Moon is \\(Int(illumination * 100))% illuminated\")"],"syntax":"swift"},{"type":"heading","level":2,"text":"Finding Quarter Phases","anchor":"Finding-Quarter-Phases"},{"type":"heading","level":3,"text":"Search for a Specific Phase","anchor":"Search-for-a-Specific-Phase"},{"type":"codeListing","code":["\/\/ Next full moon","let fullMoon = try Moon.searchPhase(.full, after: .now)","print(\"Next full moon: \\(fullMoon)\")","","\/\/ Next new moon","let newMoon = try Moon.searchPhase(.new, after: .now)"],"syntax":"swift"},{"type":"heading","level":3,"text":"Get the Next Quarter","anchor":"Get-the-Next-Quarter"},{"type":"codeListing","code":["let quarter = try Moon.nextQuarter(after: .now)","print(\"\\(quarter.phase.emoji) \\(quarter.phase.name) at \\(quarter.time)\")"],"syntax":"swift"},{"type":"heading","level":3,"text":"All Quarters in a Date Range","anchor":"All-Quarters-in-a-Date-Range"},{"type":"codeListing","code":["let start = AstroTime(year: 2025, month: 1, day: 1)","let end = AstroTime(year: 2025, month: 2, day: 1)","","let quarters = try Moon.quarters(from: start, to: end)","for quarter in quarters {","    print(\"\\(quarter.phase.emoji) \\(quarter.time)\")","}"],"syntax":"swift"},{"type":"heading","level":2,"text":"Lunar Position","anchor":"Lunar-Position"},{"type":"heading","level":3,"text":"Ecliptic Coordinates","anchor":"Ecliptic-Coordinates"},{"type":"codeListing","code":["let position = try Moon.eclipticPosition(at: .now)","print(\"Longitude: \\(position.longitude)Â°\")","print(\"Latitude: \\(position.latitude)Â°\")","print(\"Distance: \\(position.distance) AU\")"],"syntax":"swift"},{"type":"heading","level":3,"text":"Moon State (Position and Velocity)","anchor":"Moon-State-Position-and-Velocity"},{"inlineContent":[{"type":"text","text":"Get the Moonâ€™s complete state vector including velocity:"}],"type":"paragraph"},{"type":"codeListing","code":["let state = try Moon.geoState(at: .now)","","\/\/ Position in AU","print(\"Distance: \\(state.position.magnitude) AU\")","","\/\/ Velocity in AU\/day","let speed = sqrt(","    state.velocity.x * state.velocity.x +","    state.velocity.y * state.velocity.y +","    state.velocity.z * state.velocity.z",")","print(\"Speed: \\(speed) AU\/day\")"],"syntax":"swift"},{"type":"aside","name":"Tip","content":[{"inlineContent":[{"text":"Use ","type":"text"},{"type":"codeVoice","code":"geoState(at:)"},{"text":" for velocity calculations instead of differencing","type":"text"},{"text":" ","type":"text"},{"text":"ecliptic longitude positions, which gives inaccurate results.","type":"text"}],"type":"paragraph"}],"style":"tip"},{"type":"heading","level":3,"text":"Using CelestialBody","anchor":"Using-CelestialBody"},{"inlineContent":[{"text":"The Moon is also available as a ","type":"text"},{"type":"reference","identifier":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/CelestialBody","isActive":true},{"text":":","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["let horizon = try CelestialBody.moon.horizon(at: .now, from: observer)","let equatorial = try CelestialBody.moon.equatorial(at: .now)"],"syntax":"swift"},{"type":"heading","level":2,"text":"Libration","anchor":"Libration"},{"inlineContent":[{"type":"text","text":"Libration is the Moonâ€™s apparent wobble that lets us see slightly more than 50% of its surface:"}],"type":"paragraph"},{"type":"codeListing","code":["let lib = Moon.libration(at: .now)","","\/\/ Sub-Earth point (what's at the center of the visible disc)","print(\"Latitude: \\(lib.subEarthLatitude)Â°\")","print(\"Longitude: \\(lib.subEarthLongitude)Â°\")","","\/\/ Distance and apparent size","print(\"Distance: \\(Int(lib.distanceKM)) km\")","print(\"Apparent diameter: \\(lib.apparentDiameter)Â°\")"],"syntax":"swift"},{"inlineContent":[{"text":"Interpret libration values:","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Positive latitude: More of the north polar region is visible"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Positive longitude: More of the Moonâ€™s east limb is visible","type":"text"}],"type":"paragraph"}]}]},{"type":"heading","level":2,"text":"Lunar Nodes","anchor":"Lunar-Nodes"},{"inlineContent":[{"text":"The nodes are where the Moonâ€™s orbit crosses the ecliptic plane:","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["\/\/ Find next node crossing","let node = try Moon.searchNode(after: .now)","print(\"\\(node.kind.symbol) \\(node.kind.name) at \\(node.time)\")","\/\/ Output: \"â˜Š Ascending Node at 2025-01-15...\""],"syntax":"swift"},{"type":"heading","level":3,"text":"Node Types","anchor":"Node-Types"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Ascending (â˜Š)"}]},{"type":"text","text":": Moon crosses from south to north of the ecliptic"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Descending (â˜‹)"}],"type":"strong"},{"text":": Moon crosses from north to south","type":"text"}]}]}]},{"type":"heading","level":3,"text":"All Nodes in a Range","anchor":"All-Nodes-in-a-Range"},{"type":"codeListing","code":["let nodes = try Moon.nodeCrossings(","    from: AstroTime(year: 2025, month: 1, day: 1),","    to: AstroTime(year: 2025, month: 12, day: 31)",")","for node in nodes {","    print(\"\\(node.kind.symbol) \\(node.time)\")","}"],"syntax":"swift"},{"type":"heading","level":2,"text":"Lunar Apsis","anchor":"Lunar-Apsis"},{"inlineContent":[{"type":"text","text":"Find perigee (closest) and apogee (farthest) points:"}],"type":"paragraph"},{"type":"codeListing","code":["let apsis = try Moon.searchApsis(after: .now)","print(\"\\(apsis.kind.lunarName): \\(Int(apsis.distanceKM)) km\")","\/\/ Output: \"Perigee: 356,500 km\""],"syntax":"swift"},{"type":"heading","level":3,"text":"All Apsides in a Range","anchor":"All-Apsides-in-a-Range"},{"type":"codeListing","code":["let apsides = try Moon.apsides(","    from: .now,","    to: .now.addingDays(60)",")","for apsis in apsides {","    print(\"\\(apsis.kind.lunarName) at \\(apsis.time)\")","}"],"syntax":"swift"},{"type":"heading","level":2,"text":"Moonrise and Moonset","anchor":"Moonrise-and-Moonset"},{"inlineContent":[{"type":"text","text":"Use the "},{"identifier":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/CelestialBody","type":"reference","isActive":true},{"type":"text","text":" interface:"}],"type":"paragraph"},{"type":"codeListing","code":["let observer = Observer(latitude: 40.7, longitude: -74.0)","","if let moonrise = try CelestialBody.moon.riseTime(after: .now, from: observer) {","    print(\"Moonrise: \\(moonrise)\")","}","","if let moonset = try CelestialBody.moon.setTime(after: .now, from: observer) {","    print(\"Moonset: \\(moonset)\")","}"],"syntax":"swift"}],"kind":"content"}],"variants":[{"paths":["\/documentation\/astronomykit\/moonphases"],"traits":[{"interfaceLanguage":"swift"}]}],"schemaVersion":{"minor":3,"patch":0,"major":0},"abstract":[{"type":"text","text":"Calculate moon phases, quarters, libration, and lunar nodes."}],"identifier":{"url":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/MoonPhases","interfaceLanguage":"swift"},"sections":[],"kind":"article","hierarchy":{"paths":[["doc:\/\/AstronomyKit\/documentation\/AstronomyKit"]]},"seeAlsoSections":[{"generated":true,"anchor":"Moon","title":"Moon","identifiers":["doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/Moon","doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/MoonPhase","doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/MoonQuarter","doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/Libration","doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/LunarNode"]}],"metadata":{"role":"article","modules":[{"name":"AstronomyKit"}],"title":"Moon Phases","roleHeading":"Article"},"references":{"doc://AstronomyKit/documentation/AstronomyKit/Libration":{"title":"Libration","role":"symbol","kind":"symbol","abstract":[{"text":"Lunar libration angles and related data.","type":"text"}],"identifier":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/Libration","url":"\/documentation\/astronomykit\/libration","navigatorTitle":[{"text":"Libration","kind":"identifier"}],"type":"topic","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Libration","kind":"identifier"}]},"doc://AstronomyKit/documentation/AstronomyKit/CelestialBody":{"kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"CelestialBody"}],"identifier":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/CelestialBody","title":"CelestialBody","role":"symbol","type":"topic","url":"\/documentation\/astronomykit\/celestialbody","abstract":[{"type":"text","text":"A celestial body in the solar system."}],"fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"CelestialBody"}]},"doc://AstronomyKit/documentation/AstronomyKit/Moon":{"fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"Moon"}],"navigatorTitle":[{"kind":"identifier","text":"Moon"}],"identifier":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/Moon","abstract":[{"type":"text","text":"Moon-specific calculations."}],"url":"\/documentation\/astronomykit\/moon","type":"topic","role":"symbol","kind":"symbol","title":"Moon"},"doc://AstronomyKit/documentation/AstronomyKit":{"role":"collection","identifier":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit","title":"AstronomyKit","type":"topic","url":"\/documentation\/astronomykit","abstract":[{"text":"Swift bindings for Don Crossâ€™ ","type":"text"},{"isActive":true,"identifier":"https:\/\/github.com\/cosinekitty\/astronomy","type":"reference"},{"text":" library.","type":"text"}],"kind":"symbol"},"doc://AstronomyKit/documentation/AstronomyKit/LunarNode":{"role":"symbol","title":"LunarNode","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"LunarNode"}],"kind":"symbol","abstract":[{"type":"text","text":"Information about the Moon crossing the ecliptic plane."}],"identifier":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/LunarNode","navigatorTitle":[{"kind":"identifier","text":"LunarNode"}],"type":"topic","url":"\/documentation\/astronomykit\/lunarnode"},"doc://AstronomyKit/documentation/AstronomyKit/MoonPhase":{"kind":"symbol","role":"symbol","type":"topic","identifier":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/MoonPhase","title":"MoonPhase","url":"\/documentation\/astronomykit\/moonphase","fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"text":"MoonPhase","kind":"identifier"}],"navigatorTitle":[{"text":"MoonPhase","kind":"identifier"}],"abstract":[{"text":"A phase of the Moon.","type":"text"}]},"https://github.com/cosinekitty/astronomy":{"identifier":"https:\/\/github.com\/cosinekitty\/astronomy","titleInlineContent":[{"text":"Astronomy Engine","type":"text"}],"url":"https:\/\/github.com\/cosinekitty\/astronomy","title":"Astronomy Engine","type":"link"},"doc://AstronomyKit/documentation/AstronomyKit/MoonQuarter":{"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"MoonQuarter"}],"identifier":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/MoonQuarter","role":"symbol","kind":"symbol","type":"topic","abstract":[{"type":"text","text":"A lunar quarter event (the time when a specific moon phase occurs)."}],"url":"\/documentation\/astronomykit\/moonquarter","title":"MoonQuarter","navigatorTitle":[{"kind":"identifier","text":"MoonQuarter"}]}}}