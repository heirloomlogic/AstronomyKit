{"schemaVersion":{"major":0,"minor":3,"patch":0},"abstract":[{"type":"text","text":"Transform positions between different astronomical coordinate systems."}],"primaryContentSections":[{"kind":"content","content":[{"level":2,"anchor":"Overview","type":"heading","text":"Overview"},{"inlineContent":[{"type":"text","text":"AstronomyKit supports multiple coordinate systems and provides rotation matrices for transforming between them. Understanding these systems is essential for precise astronomical work."}],"type":"paragraph"},{"level":2,"anchor":"Coordinate-Systems","type":"heading","text":"Coordinate Systems"},{"level":3,"anchor":"Equatorial-J2000-EQJ","type":"heading","text":"Equatorial J2000 (EQJ)"},{"inlineContent":[{"type":"text","text":"The standard reference frame used by most star catalogs:"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Origin: Earth’s center"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Fundamental plane: Earth’s equator at J2000.0 epoch","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Primary direction: Vernal equinox at J2000.0"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"codeListing","code":["let eq = try CelestialBody.mars.equatorial(at: .now, equatorDate: .j2000)","print(\"RA: \\(eq.rightAscension)h, Dec: \\(eq.declination)°\")"],"syntax":"swift"},{"level":3,"anchor":"Equatorial-of-Date-EQD","type":"heading","text":"Equatorial of Date (EQD)"},{"inlineContent":[{"type":"text","text":"Accounts for precession of Earth’s axis:"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Same as EQJ but referenced to the current date"}]}]}],"type":"unorderedList"},{"type":"codeListing","code":["let eq = try CelestialBody.mars.equatorial(at: .now, equatorDate: .ofDate)"],"syntax":"swift"},{"text":"Ecliptic (ECL)","level":3,"anchor":"Ecliptic-ECL","type":"heading"},{"inlineContent":[{"text":"Referenced to the plane of Earth’s orbit:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Fundamental plane: Ecliptic (Earth’s orbital plane)"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Primary direction: Vernal equinox"}],"type":"paragraph"}]}],"type":"unorderedList"},{"code":["let lon = try CelestialBody.jupiter.eclipticLongitude(at: .now)","print(\"Ecliptic longitude: \\(lon)°\")","","\/\/ Full ecliptic position","let sunPos = try Sun.position(at: .now)","print(\"λ: \\(sunPos.longitude)°, β: \\(sunPos.latitude)°\")"],"syntax":"swift","type":"codeListing"},{"text":"Horizontal (HOR)","level":3,"anchor":"Horizontal-HOR","type":"heading"},{"inlineContent":[{"text":"Local sky coordinates for an observer:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Altitude: Height above the horizon"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Azimuth: Compass direction from north"}],"type":"paragraph"}]}],"type":"unorderedList"},{"code":["let observer = Observer(latitude: 40.0, longitude: -74.0)","let hor = try CelestialBody.venus.horizon(at: .now, from: observer)","print(\"Alt: \\(hor.altitude)°, Az: \\(hor.azimuth)°\")"],"syntax":"swift","type":"codeListing"},{"text":"Galactic (GAL)","level":3,"anchor":"Galactic-GAL","type":"heading"},{"inlineContent":[{"text":"Referenced to the Milky Way:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Fundamental plane: Galactic plane"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Primary direction: Galactic center"}]}]}],"type":"unorderedList"},{"inlineContent":[{"type":"text","text":"Available via rotation matrices (see below)."}],"type":"paragraph"},{"text":"Rotation Matrices","level":2,"anchor":"Rotation-Matrices","type":"heading"},{"text":"Creating Rotation Matrices","level":3,"anchor":"Creating-Rotation-Matrices","type":"heading"},{"code":["\/\/ Equatorial J2000 to Ecliptic","let eqjToEcl = try RotationMatrix.equatorialJ2000ToEcliptic()","","\/\/ Ecliptic to Equatorial J2000","let eclToEqj = try RotationMatrix.eclipticToEquatorialJ2000()","","\/\/ Equatorial J2000 to Galactic","let eqjToGal = try RotationMatrix.equatorialJ2000ToGalactic()"],"syntax":"swift","type":"codeListing"},{"text":"Time-Dependent Rotations","level":3,"anchor":"Time-Dependent-Rotations","type":"heading"},{"inlineContent":[{"text":"Some transformations require a time for precession\/nutation:","type":"text"}],"type":"paragraph"},{"code":["\/\/ Equatorial J2000 to Equatorial of Date","let time = AstroTime.now","let eqjToEqd = try RotationMatrix.equatorialJ2000ToEquatorialOfDate(at: time)","","\/\/ Equatorial to Horizontal (requires time and observer)","let observer = Observer.greenwich","let eqjToHor = try RotationMatrix.equatorialJ2000ToHorizon(at: time, from: observer)"],"syntax":"swift","type":"codeListing"},{"text":"Applying Rotations","level":3,"anchor":"Applying-Rotations","type":"heading"},{"inlineContent":[{"text":"Transform a vector using a rotation matrix:","type":"text"}],"type":"paragraph"},{"code":["let position = try CelestialBody.mars.geoPosition(at: .now)","let rotation = try RotationMatrix.equatorialJ2000ToEcliptic()","let eclipticPosition = position.rotated(by: rotation)"],"syntax":"swift","type":"codeListing"},{"text":"Matrix Operations","level":3,"anchor":"Matrix-Operations","type":"heading"},{"code":["\/\/ Identity (no rotation)","let identity = RotationMatrix.identity","","\/\/ Inverse (reverse rotation)","let forward = try RotationMatrix.equatorialJ2000ToEcliptic()","let reverse = forward.inverse","","\/\/ Combine rotations","let combined = try forward.combined(with: anotherRotation)","","\/\/ Pivot around an axis","let rotated = try RotationMatrix.pivot(axis: 2, angle: 45.0)  \/\/ 45° around Z"],"syntax":"swift","type":"codeListing"},{"text":"Vector Types","level":2,"anchor":"Vector-Types","type":"heading"},{"text":"Vector3D","level":3,"anchor":"Vector3D","type":"heading"},{"inlineContent":[{"type":"text","text":"A 3D Cartesian position vector:"}],"type":"paragraph"},{"code":["let pos = try CelestialBody.jupiter.geoPosition(at: .now)","print(\"X: \\(pos.x) AU\")","print(\"Y: \\(pos.y) AU\")","print(\"Z: \\(pos.z) AU\")","print(\"Magnitude: \\(pos.magnitude) AU\")","","\/\/ Normalize to unit vector","let direction = pos.normalized"],"syntax":"swift","type":"codeListing"},{"text":"StateVector","level":3,"anchor":"StateVector","type":"heading"},{"inlineContent":[{"type":"text","text":"Position and velocity together:"}],"type":"paragraph"},{"code":["let state = try observer.state(at: .now)","print(\"Position: \\(state.position)\")","print(\"Velocity: \\(state.velocity)\")  \/\/ AU\/day"],"syntax":"swift","type":"codeListing"},{"text":"Spherical Coordinates","level":2,"anchor":"Spherical-Coordinates","type":"heading"},{"inlineContent":[{"text":"Used for Moon’s ecliptic position:","type":"text"}],"type":"paragraph"},{"code":["let moonPos = try Moon.eclipticPosition(at: .now)","print(\"Longitude: \\(moonPos.longitude)°\")","print(\"Latitude: \\(moonPos.latitude)°\")","print(\"Distance: \\(moonPos.distance) AU\")"],"syntax":"swift","type":"codeListing"},{"text":"Atmospheric Effects","level":2,"anchor":"Atmospheric-Effects","type":"heading"},{"text":"Refraction","level":3,"anchor":"Refraction","type":"heading"},{"inlineContent":[{"type":"text","text":"Atmospheric refraction bends light, affecting apparent altitude:"}],"type":"paragraph"},{"code":["\/\/ Normal refraction correction (default)","let apparent = try body.horizon(at: .now, from: observer, refraction: .normal)","","\/\/ No refraction (geometric position)","let geometric = try body.horizon(at: .now, from: observer, refraction: .none)","","\/\/ JPL Horizons refraction model","let jpl = try body.horizon(at: .now, from: observer, refraction: .jplHorizons)"],"syntax":"swift","type":"codeListing"},{"text":"Aberration","level":3,"anchor":"Aberration","type":"heading"},{"inlineContent":[{"type":"text","text":"Light-time and stellar aberration affect apparent positions:"}],"type":"paragraph"},{"code":["\/\/ With aberration correction (default) - what you actually see","let apparent = try body.geoPosition(at: .now, aberration: .corrected)","","\/\/ Without correction - geometric position","let geometric = try body.geoPosition(at: .now, aberration: .none)"],"syntax":"swift","type":"codeListing"},{"text":"Available Rotations","level":2,"anchor":"Available-Rotations","type":"heading"},{"header":"row","rows":[[[{"inlineContent":[{"type":"text","text":"From"}],"type":"paragraph"}],[{"inlineContent":[{"text":"To","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Method"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"EQJ"}],"type":"paragraph"}],[{"inlineContent":[{"text":"ECL","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"code":"equatorialJ2000ToEcliptic()","type":"codeVoice"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"ECL"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"EQJ"}],"type":"paragraph"}],[{"inlineContent":[{"code":"eclipticToEquatorialJ2000()","type":"codeVoice"}],"type":"paragraph"}]],[[{"inlineContent":[{"text":"EQJ","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"EQD"}],"type":"paragraph"}],[{"inlineContent":[{"code":"equatorialJ2000ToEquatorialOfDate(at:)","type":"codeVoice"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"EQD"}],"type":"paragraph"}],[{"inlineContent":[{"text":"EQJ","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"equatorialOfDateToEquatorialJ2000(at:)"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"EQJ"}],"type":"paragraph"}],[{"inlineContent":[{"text":"HOR","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"code":"equatorialJ2000ToHorizon(at:from:)","type":"codeVoice"}],"type":"paragraph"}]],[[{"inlineContent":[{"text":"HOR","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"text":"EQJ","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"horizonToEquatorialJ2000(at:from:)"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"EQJ"}],"type":"paragraph"}],[{"inlineContent":[{"text":"GAL","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"code":"equatorialJ2000ToGalactic()","type":"codeVoice"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"GAL"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"EQJ"}],"type":"paragraph"}],[{"inlineContent":[{"code":"galacticToEquatorialJ2000()","type":"codeVoice"}],"type":"paragraph"}]],[[{"inlineContent":[{"text":"ECL","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"text":"HOR","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"eclipticToHorizon(at:from:)"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"HOR"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"ECL"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"horizonToEcliptic(at:from:)"}],"type":"paragraph"}]],[[{"inlineContent":[{"text":"EQD","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"text":"ECL","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"code":"equatorialOfDateToEcliptic(at:)","type":"codeVoice"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"ECL"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"EQD"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"eclipticToEquatorialOfDate(at:)"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"HOR"}],"type":"paragraph"}],[{"inlineContent":[{"text":"EQD","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"code":"horizonToEquatorialOfDate(at:from:)","type":"codeVoice"}],"type":"paragraph"}]]],"type":"table"}]}],"kind":"article","identifier":{"url":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/CoordinateSystems","interfaceLanguage":"swift"},"metadata":{"roleHeading":"Article","modules":[{"name":"AstronomyKit"}],"title":"Coordinate Systems","role":"article"},"hierarchy":{"paths":[["doc:\/\/AstronomyKit\/documentation\/AstronomyKit"]]},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/astronomykit\/coordinatesystems"]}],"seeAlsoSections":[{"identifiers":["doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/CelestialPositions","doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/CelestialBody","doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/Observer"],"title":"Position Calculations","generated":true,"anchor":"Position-Calculations"}],"sections":[],"references":{"https://github.com/cosinekitty/astronomy":{"titleInlineContent":[{"type":"text","text":"Astronomy Engine"}],"type":"link","url":"https:\/\/github.com\/cosinekitty\/astronomy","identifier":"https:\/\/github.com\/cosinekitty\/astronomy","title":"Astronomy Engine"},"doc://AstronomyKit/documentation/AstronomyKit/CelestialPositions":{"kind":"article","abstract":[{"text":"Calculate the positions of celestial bodies in various coordinate systems.","type":"text"}],"title":"Celestial Positions","type":"topic","url":"\/documentation\/astronomykit\/celestialpositions","identifier":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/CelestialPositions","role":"article"},"doc://AstronomyKit/documentation/AstronomyKit/Observer":{"role":"symbol","navigatorTitle":[{"kind":"identifier","text":"Observer"}],"abstract":[{"text":"A geographic location for observing celestial objects.","type":"text"}],"kind":"symbol","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Observer"}],"identifier":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/Observer","type":"topic","title":"Observer","url":"\/documentation\/astronomykit\/observer"},"doc://AstronomyKit/documentation/AstronomyKit":{"abstract":[{"text":"Swift bindings for Don Cross’ ","type":"text"},{"isActive":true,"identifier":"https:\/\/github.com\/cosinekitty\/astronomy","type":"reference"},{"text":" library.","type":"text"}],"kind":"symbol","identifier":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit","title":"AstronomyKit","type":"topic","url":"\/documentation\/astronomykit","role":"collection"},"doc://AstronomyKit/documentation/AstronomyKit/CelestialBody":{"identifier":"doc:\/\/AstronomyKit\/documentation\/AstronomyKit\/CelestialBody","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"CelestialBody"}],"title":"CelestialBody","abstract":[{"text":"A celestial body in the solar system.","type":"text"}],"navigatorTitle":[{"kind":"identifier","text":"CelestialBody"}],"type":"topic","role":"symbol","kind":"symbol","url":"\/documentation\/astronomykit\/celestialbody"}}}